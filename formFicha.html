<!DOCTYPE html>
<html ng-app="distorcao">
	<head>
		<meta charset="UTF-8">
		<title>Distorção - Calculador de ficha</title>

		<!-- CSS -->
		<link rel="stylesheet" href="lib/bootstrap/css/bootstrap.min.css">
		<link rel="stylesheet" href="css/style.css">
		
		<!-- Scripts -->
		<script src="lib/angular/angular.min.js"></script>
		<script src="lib/jquery/jquery-3.2.1.min.js"></script>
		<script src="lib/popper/popper.min.js"></script>
		<script src="lib/bootstrap/js/bootstrap.min.js"></script>
		<script src="js/distorcao.js"></script>		
		<script src="js/controllers/contrFicha.js"></script>		
		<script src="js/directives.js"></script>
	</head>
	<body>
		<div ng-controller="contrFicha" ng-init="attNivel=0;attVigor=0;attDeterminacao=0;attForca=0;attDestreza=0;attMental=0;atualizaValores()">
			<div class="cabecalho-ficha">
				<h1>Ficha Distorção</h1>
				<div class="input-file-configuracao">
					<label for="configuracao-ficha">Configuração</label>
					<input type="file" class="form-control" id="configuracao-ficha" accept=".json" ng-json-select="carregaJson(contents)">				
				</div>				
			</div>
			<div class="secao-config">
				<div class="alert alert-info">
					<strong>{{infoConfigCarregada}}</strong>
				</div>
			</div>
			<div class="secao-ficha">
				<h5>Atributos</h5>
				<div class="inputs-ficha">
					<div class="input-group">
						<span class="input-group-addon">Nível</span>
						<input type="number" class="form-control" ng-model="attNivel" min="0" ng-change="calcVida()">
					</div>
					<div class="input-group">
						<span class="input-group-addon">Vigor</span>
						<input type="number" class="form-control" ng-model="attVigor" min="0" ng-change="calcVida()">
					</div>
					<div class="input-group">
						<span class="input-group-addon">Determinação</span>
						<input type="number" class="form-control" ng-model="attDeterminacao" min="0" ng-change="calcVida(); calcPeso()">
					</div>
					<div class="input-group">
						<span class="input-group-addon">Força</span>
						<input type="number" class="form-control" ng-model="attForca" min="0" ng-change="calcBonusForca(); calcPeso(); calcMovimentacao()">
					</div>
					<div class="input-group">
						<span class="input-group-addon">Destreza</span>
						<input type="number" class="form-control" ng-model="attDestreza" min="0" ng-change="calcBonusDestreza(); calcMovimentacao()">
					</div>
					<div class="input-group">
						<span class="input-group-addon">Mental</span>
						<input type="number" class="form-control" ng-model="attMental" min="0" ng-change="calcBonusMental()">
					</div>
				</div>
			</div>
			<div class="secao-ficha">
				<h5>Resultados</h5>
				<table class="table table-striped">
					<tr class="row">
						<td class="col-xs-4">Vida total:</td>
						<td class="col-xs-8	">{{resultadoVida}} HP</td>
					</tr>
					<tr class="row">
						<td class="col-xs-4">Peso:</td>
						<td class="col-xs-8">{{resultadoPeso | number : 1}}</td>
					</tr>
					<tr class="row">
						<td class="col-xs-4">Bonus força:</td>
						<td class="col-xs-8">{{resultadoBonusForca}}%</td>
					</tr>
					<tr class="row">
						<td class="col-xs-4">Bonus destreza:</td>
						<td class="col-xs-8">{{resultadoBonusDestreza}}%</td>
					</tr>
					<tr class="row">
						<td class="col-xs-4">Bonus mental:</td>
						<td class="col-xs-8">{{resultadoBonusMental}}%</td>
					</tr>
					<tr class="row">
						<td class="col-xs-4">Movimentação:</td>
						<td class="col-xs-8">{{resultadoMovimentacao}}</td>
					</tr>
				</table>
			</div>
			<div class="secao-ficha">
				<button type="button" class="btn btn-info btn-sm" data-toggle="modal" data-target="#modalConfiguracao" ng-click="transfereValores()">
					Configurações
				</button>
				<div id="modalConfiguracao" class="modal fade" role="dialog">
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<h4 class="modal-title">Configurações</h4>
								<button type="button" class="close" data-toggle="modal" data-dismiss="modal">&times;</button>
							</div>
							<div class="modal-body">
								<div class="input-configuracao">
									<label for="configVidaBase">Vida base</label>
									<input type="text" class="form-control" ng-model="configVidaBase" ng-change="" id="configVidaBase">
								</div>								
								<div class="input-configuracao">
									<label for="configVidaNivel">Vida por nível</label>
									<input type="text" class="form-control" ng-model="configVidaNivel" ng-change="" id="configVidaNivel">
								</div>
								<div class="input-configuracao">
									<label for="configVidaDeterminacao">Vida por determinação</label>
									<input type="text" class="form-control" ng-model="configVidaDeterminacao" ng-change="" id="configVidaDeterminacao">
								</div>
								<div class="input-configuracao">
									<label for="configIntervaloVigor">Intervalos de vigor</label>
									<input type="text" class="form-control" ng-model="configIntervaloVigor" ng-change="" id="configIntervaloVigor">
								</div>
								<div class="input-configuracao">
									<label for="configMultiplicadorVigor">Multiplicadores de vigor</label>
									<input type="text" class="form-control" ng-model="configMultiplicadorVigor" ng-change="" id="configMultiplicadorVigor">
								</div>
								<div class="input-configuracao">
									<label for="configIntervaloPesoDeterminacao">Intervalos de peso determinação</label>
									<input type="text" class="form-control" ng-model="configIntervaloPesoDeterminacao" ng-change="" id="configIntervaloPesoDeterminacao">
								</div>
								<div class="input-configuracao">
									<label for="configMultiplicadorPesoDeterminacao">Multiplicadores de peso determinação</label>
									<input type="text" class="form-control" ng-model="configMultiplicadorPesoDeterminacao" ng-change="" id="configMultiplicadorPesoDeterminacao">
								</div>
								<div class="input-configuracao">
									<label for="configIntervaloPesoForca">Intervalos de peso força</label>
									<input type="text" class="form-control" ng-model="configIntervaloPesoForca" ng-change="" id="configIntervaloPesoForca">
								</div>
								<div class="input-configuracao">
									<label for="configMultiplicadorPesoForca">Multiplicadores de peso força</label>
									<input type="text" class="form-control" ng-model="configMultiplicadorPesoForca" ng-change="" id="configMultiplicadorPesoForca">
								</div>
								<div class="input-configuracao">
									<label for="configIntervaloForca">Intervalos de bonus força</label>
									<input type="text" class="form-control" ng-model="configIntervaloForca" ng-change="" id="configIntervaloForca">
								</div>
								<div class="input-configuracao">
									<label for="configMultiplicadorForca">Multiplicadores de bonus força</label>
									<input type="text" class="form-control" ng-model="configMultiplicadorForca" ng-change="" id="configMultiplicadorForca">
								</div>
								<div class="input-configuracao">
									<label for="configIntervaloDestreza">Intervalos de bonus destreza</label>
									<input type="text" class="form-control" ng-model="configIntervaloDestreza" ng-change="" id="configIntervaloDestreza">
								</div>
								<div class="input-configuracao">
									<label for="configMultiplicadorDestreza">Multiplicadores de bonus destreza</label>
									<input type="text" class="form-control" ng-model="configMultiplicadorDestreza" ng-change="" id="configMultiplicadorDestreza">
								</div>
								<div class="input-configuracao">
									<label for="configIntervaloMental">Intervalos de bonus mental</label>
									<input type="text" class="form-control" ng-model="configIntervaloMental" ng-change="" id="configIntervaloMental">
								</div>
								<div class="input-configuracao">
									<label for="configMultiplicadorMental">Multiplicadores de bonus mental</label>
									<input type="text" class="form-control" ng-model="configMultiplicadorMental" ng-change="" id="configMultiplicadorMental">
								</div>
								<div class="input-configuracao">
									<label for="configMovimentacaoBase">Base de movimentação</label>
									<input type="text" class="form-control" ng-model="configMovimentacaoBase" ng-change="" id="configMovimentacaoBase">
								</div>
							</div>
							<div class="alert alert-info">
								<strong>Dica:</strong> Deve-se manter cada intervalo/multiplicador separado por vírgula (,) e sem espaço após, caso contrário haverá erros.
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-default btn-md" data-dismiss="modal" ng-click="atualizarConfiguracao();atualizaValores()">Salvar</button>
								<button type="button" class="btn btn-default btn-md" data-dismiss="modal">Cancelar</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</body>
</html>
